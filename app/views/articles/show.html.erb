<%= javascript_include_tag "fetch-api-data", "data-turbo-track": "reload" %>
<% @pipeline_body_result = $pipeline.call( @article.body ) rescue "PipelineBody Error: #{$!}" %>
         <%#= pipeline_body_result[:output].html_safe %>

<div class="card my-4">
  <h1 class="card-title"><%= @article.title %></h1>

  <div class="card-subtitle float-right">
    <h2>ğŸ— Votes</h2>
    #Votes: <b><%=  @article.votes_for.count %></b> <br/>
    Average: <b><%= @article.weighted_average %></b> <br/>


    ğŸ‘ #likes: <%= @article.get_likes().size %> <br/>
    ğŸ‘ğŸ¾ #dislikes: <%= @article.get_dislikes().size %> <br/>

    </div>

 <!--  <img class="float-right ..." src="path/to/image.jpg">
  <p class="card-subtitle">tailwind float right: https://tailwindcss.com/docs/float
 -->


  <p class="card-subtitle">
    <%= author_and_date(@article) %>
  </p>

   <p><%= render_main_image(@article) %></p>

  <div class="card-body">
    <%= @article.body %>
  </div>

  <div class="card-actions">
    <%= link_to "Edit", edit_article_path(@article), class: 'btn' %>
  </div>

   <div class="card-carlessian-footer border-t-2 dark:border-neutral-600" >
    <%= render_tags @article %> |
    <%= render_votes @article %>
  </div>


  <hr/>
  <% if (current_user.is_admin rescue false) %>
    <%= render partial: 'articles/admin_show' %>
    <% if Rails.env == 'development' %>
      <% console %>
    <% end %>
    <%= link_to "Delete", article_path(@article), method: :delete, data: { confirm: "Are you sure?" }, class: 'btn btn-danger' %>
    <%= link_to "Back", articles_path, class: 'btn' %>
  <% end %>
</div>
